variables:
  LC_ALL: C.UTF-8

stages:
  - test
  - deploy


image: $CI_REGISTRY/packaging/apkg/ci/python-current:apkg


flake8:
  stage: test
  script:
    - tox -e flake8

pylint:
  stage: test
  script:
    - tox -e pylint

unit:
  stage: test
  script:
    - tox -e unit

self:
  stage: test
  script:
    - tox -e self

integration:
  stage: test
  script:
    - tox -e integration


# docs published to GitLab Pages: https://packaging.pages.nic.cz/apkg/
pages:
  stage: deploy
  script:
    - mkdocs build
    - mv site public
  artifacts:
    paths:
    - public
  only:
    - master
